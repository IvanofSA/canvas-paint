(function(){function l(o,r,i){function c(n,t){if(!r[n]){if(!o[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(u)return u(n,!0);var a=new Error("Cannot find module '"+n+"'");throw a.code="MODULE_NOT_FOUND",a}var s=r[n]={exports:{}};o[n][0].call(s.exports,function(t){var e=o[n][1][t];return c(e||t)},s,s.exports,l,o,r,i)}return r[n].exports}for(var u="function"==typeof require&&require,t=0;t<i.length;t++)c(i[t]);return c}return l})()({1:[function(t,e,n){"use strict";var a=t("./modules/Paint");var s=o(a);function o(t){return t&&t.__esModule?t:{default:t}}var r=new s.default({canvas:"canvasTemp",canvasCopy:"canvasCopy"});r.init()},{"./modules/Paint":2}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});var a=function(){function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(t,a.key,a)}}return function(t,e,n){if(e)a(t.prototype,e);if(n)a(t,n);return t}}();function s(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(t){s(this,e);this.canvas=document.getElementById(t.canvas);this.canvasCopy=document.getElementById(t.canvasCopy);this.mouse={};this.startX=0;this.startY=0;this.started=false;this.mousedown=false;this.curColor="#000";this.curSize=1;this.curTool="marker";this.ctx={};this.ctxCopy={};this.btnSetColor=document.querySelector(".btn-color");this.btnSetTool=document.querySelector(".btn-tool");this.btnSetClear=document.querySelector(".btn-clear");this.btnSetSave=document.querySelector(".btn-save");this.rangeSize=document.querySelector(".range-size")}a(e,[{key:"init",value:function t(){this._initCanvas();this._addEventListners()}},{key:"_initCanvas",value:function t(){if(this.canvas.getContext){this.ctx=this.canvas.getContext("2d");this.ctxCopy=this.canvasCopy.getContext("2d")}else{console.log("canvas не поддерживается")}}},{key:"_addEventListners",value:function t(){var a=this;var e=this;this.canvas.addEventListener("mouseup",function(t){e._mouseup(t)});this.canvas.addEventListener("mousedown",function(t){e._mousedown(t)});this.canvas.addEventListener("mousemove",function(t){e._startTracking(t)});this.canvas.addEventListener("mouseleave",function(t){e._stopTracking(t)});document.addEventListener("click",function(t){if(t.target.classList.contains("btn-tool")){e._switchTool(t,t.target)}});document.addEventListener("click",function(t){if(t.target.classList.contains("btn-color")){a._setColor(t,t.target)}});document.addEventListener("click",function(t){if(t.target.classList.contains("btn-size")){e._setSize(t,t.target)}});this.rangeSize.addEventListener("input",function(t){var e=a.rangeSize.value;var n=document.querySelector(".range-size_current-value");console.log(n);n.innerHTML=e;a.curSize=e});this.btnSetClear.addEventListener("click",function(t){e._clearCanvas(t)});this.btnSetSave.addEventListener("click",function(t){e._saveCanvas(t)})}},{key:"_getCursorCoordinate",value:function t(e){var n=e.pageX-this.canvas.offsetLeft,a=e.pageY-this.canvas.offsetTop;return{x:n,y:a}}},{key:"_mousedown",value:function t(e){var n=this;this.mousedown=true;this.startX=n._getCursorCoordinate(e).x;this.startY=n._getCursorCoordinate(e).y}},{key:"_mouseup",value:function t(e){this.mousedown=false;this.started=false;this._imgUpdate()}},{key:"_stopTracking",value:function t(e){this._mouseup()}},{key:"_startTracking",value:function t(e){e.preventDefault();this.mouse.x=this._getCursorCoordinate(e).x;this.mouse.y=this._getCursorCoordinate(e).y;if(this.mousedown){this.ctx.strokeStyle=this.curColor;this.ctx.lineWidth=this.curSize;this._setTool(e,this.curTool)}}},{key:"_imgUpdate",value:function t(){this.ctxCopy.drawImage(this.canvas,0,0);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"_setTool",value:function t(e,n){var s=this;switch(n){case"marker":return function(){if(!s.started){s.ctx.beginPath();s.ctx.moveTo(s.mouse.x,s.mouse.y);s.started=true}else{s.ctx.lineTo(s.mouse.x,s.mouse.y);s.ctx.stroke()}}();break;case"rectangle":return function(){var t=Math.min(s.mouse.x,s.startX),e=Math.min(s.mouse.y,s.startY),n=Math.abs(s.mouse.x-s.startX),a=Math.abs(s.mouse.y-s.startY);if(!n||!a){return}s.ctx.clearRect(0,0,s.canvas.width,s.canvas.height);s.ctx.strokeRect(t,e,n,a)}();break;case"line":return function(){s.ctx.beginPath();s.ctx.moveTo(s.startX,s.startY);s.ctx.clearRect(0,0,s.canvas.width,s.canvas.height);s.ctx.lineTo(s.mouse.x,s.mouse.y);s.ctx.stroke()}();break;case"eraser":return function(){s.curColor=$(canvasCopy).css("background-color");s.ctx.strokeStyle=s.curColor;s._setTool(e,"marker")}();break}}},{key:"_setColor",value:function t(e,n){e.preventDefault();this.curColor=$(n).css("background-color")}},{key:"_switchTool",value:function t(e,n){var a=this;e.preventDefault();a.curTool=$(n).attr("data-name");console.log(a.curTool)}},{key:"_clearCanvas",value:function t(e){e.preventDefault();this.ctxCopy.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"_saveCanvas",value:function t(e){e.preventDefault();var n=document.createElement("a");n.setAttribute("download","image.jpg");n.setAttribute("href",this.canvasCopy.toDataURL("image/jpg"));n.setAttribute("target","_blank");onload=n.click()}}]);return e}();n.default=o},{}]},{},[1]);
//# sourceMappingURL=main.bundle.js.map
