{"version":3,"sources":["node_modules/browser-pack/_prelude.js","sources/js/main.js","sources/js/modules/Paint.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_Paint","paint","_Paint2","default","canvas","canvasCopy","init","Paint","data","_classCallCheck","this","document","getElementById","mouse","startX","startY","started","mousedown","curColor","curSize","curTool","ctx","ctxCopy","btnSetColor","querySelector","btnSetTool","btnSetClear","btnSetSave","rangeSize","_initCanvas","_addEventListners","getContext","console","log","_this","that","addEventListener","_mouseup","_mousedown","_startTracking","_stopTracking","target","classList","contains","_switchTool","_setColor","_setSize","line","value","my","innerHTML","_clearCanvas","_saveCanvas","mouseX","pageX","offsetLeft","mouseY","pageY","offsetTop","x","y","_getCursorCoordinate","_imgUpdate","preventDefault","strokeStyle","lineWidth","_setTool","drawImage","clearRect","width","height","beginPath","moveTo","lineTo","stroke","Math","min","w","abs","h","strokeRect","$","css","item","attr","link","createElement","setAttribute","toDataURL","onload","click"],"mappings":"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","file":"main.bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import Paint from './modules/Paint';\r\n\r\nlet paint = new Paint({\r\n    canvas: 'canvasTemp',\r\n    canvasCopy: 'canvasCopy'\r\n});\r\n\r\npaint.init();\r\n","class Paint {\r\n\r\n    constructor(data) {\r\n        this.canvas = document.getElementById(data.canvas);\r\n        this.canvasCopy = document.getElementById(data.canvasCopy);\r\n        this.mouse = {};\r\n        this.startX = 0;\r\n        this.startY = 0;\r\n        this.started = false;\r\n        this.mousedown = false;\r\n        this.curColor = '#000';\r\n        this.curSize = 1;\r\n        this.curTool = 'marker';\r\n        this.ctx = {};\r\n        this.ctxCopy = {};\r\n        this.btnSetColor = document.querySelector('.btn-color');\r\n        this.btnSetTool = document.querySelector('.btn-tool');\r\n        this.btnSetClear = document.querySelector('.btn-clear');\r\n        this.btnSetSave = document.querySelector('.btn-save');\r\n        this.rangeSize = document.querySelector('.range-size');\r\n\r\n    }\r\n\r\n    init() {\r\n        this._initCanvas();\r\n        this._addEventListners();\r\n    }\r\n\r\n    _initCanvas() {\r\n        if (this.canvas.getContext) {\r\n            this.ctx = this.canvas.getContext('2d');\r\n            this.ctxCopy = this.canvasCopy.getContext('2d');\r\n        } else {\r\n            console.log('canvas не поддерживается');\r\n        }\r\n    }\r\n\r\n    _addEventListners() {\r\n        let that = this;\r\n\r\n        this.canvas.addEventListener('mouseup', (e) => {\r\n            that._mouseup(e);\r\n        });\r\n        this.canvas.addEventListener('mousedown', (e) => {\r\n            that._mousedown(e);\r\n        });\r\n        this.canvas.addEventListener('mousemove', (e) => {\r\n            that._startTracking(e);\r\n        });\r\n        this.canvas.addEventListener('mouseleave', (e) => {\r\n            that._stopTracking(e);\r\n        });\r\n\r\n        document.addEventListener('click', (e) => {\r\n            if(e.target.classList.contains('btn-tool')) {\r\n                that._switchTool(e, e.target);\r\n            }\r\n        });\r\n        document.addEventListener('click', (e) => {\r\n            if(e.target.classList.contains('btn-color')) {\r\n                this._setColor(e, e.target);\r\n            }\r\n        });\r\n        document.addEventListener('click', (e) => {\r\n            if(e.target.classList.contains('btn-size')) {\r\n                that._setSize(e, e.target);\r\n            }\r\n        });\r\n        this.rangeSize.addEventListener('input', (e) => {\r\n            let line = this.rangeSize.value;\r\n            let my = document.querySelector('.range-size_current-value');\r\n            console.log(my);\r\n            my.innerHTML =line;\r\n            this.curSize = line;\r\n\r\n        });\r\n\r\n        this.btnSetClear.addEventListener('click', (e) => {\r\n            that._clearCanvas(e);\r\n        });\r\n        this.btnSetSave.addEventListener('click', (e) => {\r\n            that._saveCanvas(e);\r\n        });\r\n    }\r\n\r\n\r\n    _getCursorCoordinate(e) {\r\n        let mouseX = e.pageX - this.canvas.offsetLeft,\r\n            mouseY = e.pageY - this.canvas.offsetTop;\r\n\r\n        return {\r\n            x: mouseX,\r\n            y: mouseY\r\n        }\r\n    }\r\n\r\n    _mousedown(e) {\r\n        let that = this;\r\n        this.mousedown = true;\r\n        this.startX = that._getCursorCoordinate(e).x;\r\n        this.startY = that._getCursorCoordinate(e).y;\r\n    }\r\n\r\n    _mouseup(e) {\r\n        this.mousedown = false;\r\n        this.started = false;\r\n        this._imgUpdate();\r\n    }\r\n\r\n    _stopTracking(e) {\r\n        this._mouseup();\r\n    }\r\n\r\n\r\n    _startTracking(e) {\r\n        e.preventDefault();\r\n        this.mouse.x = this._getCursorCoordinate(e).x;\r\n        this.mouse.y = this._getCursorCoordinate(e).y;\r\n\r\n        if (this.mousedown) {\r\n            this.ctx.strokeStyle = this.curColor;\r\n            this.ctx.lineWidth = this.curSize;\r\n            this._setTool(e, this.curTool);\r\n        }\r\n    }\r\n\r\n    _imgUpdate() {\r\n        this.ctxCopy.drawImage(this.canvas, 0, 0);\r\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n    }\r\n\r\n    _setTool(e, curTool) {\r\n\r\n        let that = this;\r\n        switch (curTool) {\r\n            case 'marker':\r\n                return function () {\r\n                    if (!that.started) {\r\n                        that.ctx.beginPath();\r\n                        that.ctx.moveTo(that.mouse.x, that.mouse.y);\r\n                        that.started = true;\r\n                    } else {\r\n                        that.ctx.lineTo(that.mouse.x, that.mouse.y);\r\n                        that.ctx.stroke();\r\n                    }\r\n                }();\r\n\r\n                break;\r\n            case 'rectangle':\r\n                return function () {\r\n                    let x = Math.min(that.mouse.x, that.startX),\r\n                        y = Math.min(that.mouse.y, that.startY),\r\n                        w = Math.abs(that.mouse.x - that.startX),\r\n                        h = Math.abs(that.mouse.y - that.startY);\r\n\r\n                    if (!w || !h) {\r\n                        return;\r\n                    }\r\n                    that.ctx.clearRect(0, 0, that.canvas.width, that.canvas.height);\r\n                    that.ctx.strokeRect(x, y, w, h);\r\n                }();\r\n\r\n                break;\r\n            case 'line':\r\n                return function () {\r\n                    that.ctx.beginPath();\r\n                    that.ctx.moveTo(that.startX, that.startY);\r\n                    that.ctx.clearRect(0, 0, that.canvas.width, that.canvas.height);\r\n                    that.ctx.lineTo(that.mouse.x, that.mouse.y);\r\n                    that.ctx.stroke();\r\n                }();\r\n\r\n                break;\r\n\r\n            case 'eraser':\r\n                return function () {\r\n                    that.curColor = $(canvasCopy).css('background-color');\r\n                    that.ctx.strokeStyle = that.curColor;\r\n                    that._setTool(e, 'marker');\r\n                }();\r\n                break;\r\n        }\r\n    }\r\n\r\n    _setColor(e, item) {\r\n        e.preventDefault();\r\n\r\n        this.curColor = $(item).css('background-color');\r\n    }\r\n\r\n\r\n    _switchTool(e, item) {\r\n        let that = this;\r\n        e.preventDefault();\r\n        that.curTool = $(item).attr('data-name');\r\n\r\n        console.log(that.curTool);\r\n    }\r\n\r\n    _clearCanvas(e) {\r\n        e.preventDefault();\r\n        this.ctxCopy.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\r\n    }\r\n\r\n    _saveCanvas(e) {\r\n        e.preventDefault();\r\n\r\n        let link = document.createElement('a');\r\n        link.setAttribute('download', 'image.jpg');\r\n        link.setAttribute('href', this.canvasCopy.toDataURL('image/jpg'));\r\n        link.setAttribute('target', '_blank');\r\n        onload = link.click();\r\n\r\n    }\r\n}\r\n\r\nexport default Paint;"]}